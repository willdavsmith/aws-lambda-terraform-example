namespace: Radius.Compute
types:
  functions:
    description: |
      The `Radius.Compute/functions` resource type deploys a serverless function instance. Use it in your application Bicep to bind a function to an application/environment and set the image and auth behavior.

      Example:
      ```
      extension radius
      param environment string

      resource myApp 'Applications.Core/Applications@2023-10-01-preview' = { ... }

      resource fn 'Radius.Compute/functions@2025-08-01-preview' = {
        name: 'hello-func'
        properties: {
          application: myApp.id
          environment: environment
          image: 'ghcr.io/your-org/hello-func:latest'
        }
      }
      ```

      After deployment, the function emits a `url` property you can expose via connections or outputs.
    apiVersions:
      '2025-08-01-preview':
        schema:
          type: object
          properties:
            environment:
              type: string
              description: "(Required) The Radius Environment ID. Typically set by the rad CLI (e.g., `environment`)."
            application:
              type: string
              description: "(Optional) The Radius Application ID. For example, `myApp.id`."
            image:
              type: string
              description: "(Optional) Container image URI for the function (public or authenticated as supported by your runtime)."
            functionPath:
              type: string
              description: '(Optional) The path to the function within the container image.'
            connections:
              type: object
              description: '(Optional) Map of resources this function is dependent upon. `db: { source: db.id } for example.'
              additionalProperties:
                type: object
                properties:
                  source:
                    type: string
                    description: (Required) The resource ID of the resource this container is dependent upon.
                  disableDefaultEnvVars:
                    type: boolean
                    description: (Optional) Disables the automatic injection of environment variables from connected resource properties.
                required: [source]
          required: [environment, image]
